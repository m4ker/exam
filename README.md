# 爬虫练习

## 题目内容

> It 桔子网址: http://www.itjuzi.com  
> 抓取目标：http://itjuzi.com/company/1786  
> 抓取内容：  
>>   1. 产品名称 (如上图的“36 氪 36KR”)  
>>   2. 公司名称(如北京协力筑成金融信息服务有限公司)  
>>   3. 地点(如北京,海淀区)  
>>   4. 阶段(如成长发展期)  
>>   5. 公司招聘页面的 url(http://36kr.com/pages/hire )  
>
> 提交内容  
>>   1. 代码,包括.git(可以放在 github 上)  
>>   2. companies.json:抓取的信息用 json 存在 companies.json 里  
>>   3. readme.txt 写清楚  
>>>     a. 如何抓取 1000 个公司  
>>>     b. 如何抓取招聘页面 url,总共抓取到多少公司的招聘页面 url  
>>>     c. 完成任务花费的时间  
>>>     d. 有 bug 或可以提升的地方  
    

因为最擅长的是PHP，目前正在学习Node，所以打算先用PHP快速实现第一版，再用Node的方式实现第二版。

## 题目分析
    
### 1. 如何采集到公司数据

从公司页面分析得出结论如下：公司采用整数自增，目前最大id为31068，目前共有有效数据25219条，每页有10条记录。所以有如下两种思路：

1. 遍历从1到31068的所有公司页面，采集完所有数据需要31068次请求

2. 遍历列表页，再匹配公司页面，这样采集完所有的数据需要ceil(25219/10)+25219=27741次请求

从效率上来看，2更优，但是从难易程度上，1更有优势，而且流程更容易控制。
    
    
### 2. 如何采集招聘页面

通过对前20个公司网站的观察，发现首页上一般都会有招聘页面的链接，格式如下：

- 加入XX
- 加入我们
- 人才招聘
- 招聘信息
- 诚聘英才
- 招贤纳士

所以可以通过关键字对招聘页面进行匹配。


## 时间记录

- 9:00 创建git
- 9:04 检出git
- 9:43 分析完毕
- 00:35 代码已经初步可以运行了，最近半个小时发现it橘子的网站经常502，不知道是不是并发开的太高了。

## todolist

- 抓到的相对路径需要处理
- 优化输出效果
- 优化招聘页面匹配规则
- JS生成的页面抓取不到